{% extends "base/base.html" %}
{%load staticfiles widget_tweaks %}
{% block page_title %}
<title>Laptop</title>
{% endblock page_title %}
{% block content %}
{% if object.estado.id == 1 or object.estado.id == 2  and object.etapa.id == 1 or object.etapa.id == 2 or object.etapa.id == 3 %}
<section class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-5">
        <div class="box">
          <div class="box-header">
            <div class="row">
              <div class="col-md-9">
                <h3 class="box-title">Actualizar Laptops</h3>
              </div>
              <div class="col-md-3">
              </div>
            </div>
          </div>
          <div id="disco" class="box-body" data-id={{disco_duro}} data-triage={{triage}}>
            <table class="table table-condensed">
              <form action="{% url 'laptop_edit' triage=form.instance.triage%}" method="post">
                {%csrf_token%}
                <table>
                  {{ form.as_table }}
                  <tr>
                    <td>
                      <input type="submit" class="btn btn-success" value="Guardar" tabindex="12" />
                    </td>
                  </tr>
                </table>
              </form>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{%endif%}
{% endblock content %}
{% block extra_js %}
<script>
$(document).ready(function() { 
    var disco_id = $("#disco").data("id");
    var triage = $("#disco").data("triage");

    $("#id_disco_duro").select2({
        placeholder: "Seleccione un disco duro",
        allowClear: true 
    });

    if (disco_id && disco_id !== "---------") {
        if ($('#id_disco_duro option[value="' + disco_id + '"]').length === 0) {
            var newOption = new Option(triage, disco_id, true, true);
            $('#id_disco_duro').append(newOption);
        }
        $('#id_disco_duro').val(disco_id).trigger('change');
    }
});
</script>

{% endblock extra_js %}
